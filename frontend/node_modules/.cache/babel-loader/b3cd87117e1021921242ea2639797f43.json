{"ast":null,"code":"import { useEffect, useContext } from \"react\";\nimport { useAsync } from \"react-hook-async\";\nimport axios from \"axios\";\nimport { AuthUserCtx } from \"../context/authUser\";\n\nconst fetchMeApi = jwt => {\n  return axios.get(\"http://localhost:5000/auth/me\", {\n    headers: {\n      Authorization: \"Bearer \" + jwt\n    }\n  }).then(res => res.data);\n};\n\nexport const useAuth = () => {\n  const [fetchMeApiData, executeFetchMe] = useAsync({}, fetchMeApi);\n  const {\n    setAuthUser\n  } = useContext(AuthUserCtx);\n  useEffect(() => {\n    const jwt = localStorage.getItem(\"jwt\");\n    executeFetchMe(jwt).then(user => {\n      setAuthUser(user);\n    });\n  }, [executeFetchMe, setAuthUser]);\n  return fetchMeApiData;\n};","map":{"version":3,"sources":["C:/Users/Asus/FullStack_CL32/project/frontend/src/hooks/useAuth.js"],"names":["useEffect","useContext","useAsync","axios","AuthUserCtx","fetchMeApi","jwt","get","headers","Authorization","then","res","data","useAuth","fetchMeApiData","executeFetchMe","setAuthUser","localStorage","getItem","user"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,UAApB,QAAsC,OAAtC;AACA,SAASC,QAAT,QAAyB,kBAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,WAAT,QAA4B,qBAA5B;;AAEA,MAAMC,UAAU,GAAIC,GAAD,IAAS;AAC1B,SAAOH,KAAK,CACTI,GADI,CACA,+BADA,EACiC;AACpCC,IAAAA,OAAO,EAAE;AACPC,MAAAA,aAAa,EAAE,YAAYH;AADpB;AAD2B,GADjC,EAMJI,IANI,CAMEC,GAAD,IAASA,GAAG,CAACC,IANd,CAAP;AAOD,CARD;;AAUA,OAAO,MAAMC,OAAO,GAAG,MAAM;AAC3B,QAAM,CAACC,cAAD,EAAiBC,cAAjB,IAAmCb,QAAQ,CAAC,EAAD,EAAKG,UAAL,CAAjD;AACA,QAAM;AAAEW,IAAAA;AAAF,MAAkBf,UAAU,CAACG,WAAD,CAAlC;AAEAJ,EAAAA,SAAS,CAAC,MAAM;AACd,UAAMM,GAAG,GAAGW,YAAY,CAACC,OAAb,CAAqB,KAArB,CAAZ;AACAH,IAAAA,cAAc,CAACT,GAAD,CAAd,CAAoBI,IAApB,CAA0BS,IAAD,IAAU;AACjCH,MAAAA,WAAW,CAACG,IAAD,CAAX;AACD,KAFD;AAGD,GALQ,EAKN,CAACJ,cAAD,EAAiBC,WAAjB,CALM,CAAT;AAOA,SAAOF,cAAP;AACD,CAZM","sourcesContent":["import { useEffect, useContext } from \"react\";\nimport { useAsync } from \"react-hook-async\";\nimport axios from \"axios\";\n\nimport { AuthUserCtx } from \"../context/authUser\";\n\nconst fetchMeApi = (jwt) => {\n  return axios\n    .get(\"http://localhost:5000/auth/me\", {\n      headers: {\n        Authorization: \"Bearer \" + jwt,\n      },\n    })\n    .then((res) => res.data);\n};\n\nexport const useAuth = () => {\n  const [fetchMeApiData, executeFetchMe] = useAsync({}, fetchMeApi);\n  const { setAuthUser } = useContext(AuthUserCtx);\n\n  useEffect(() => {\n    const jwt = localStorage.getItem(\"jwt\");\n    executeFetchMe(jwt).then((user) => {\n      setAuthUser(user);\n    });\n  }, [executeFetchMe, setAuthUser]);\n\n  return fetchMeApiData;\n};\n"]},"metadata":{},"sourceType":"module"}