{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Asus\\\\FullStack_CL32\\\\project\\\\frontend\\\\src\\\\screens\\\\me\\\\Me.js\";\nimport React, { useContext } from \"react\";\nimport { Container, Form, Button } from \"react-bootstrap\";\nimport { useFormik } from \"formik\";\nimport axios from \"axios\";\nimport { AuthUserCtx } from \"../../context/authUser\";\nconst defaultImg = \"https://icon-library.com/images/default-user-icon/default-user-icon-4.jpg\";\nexport const Me = () => {\n  const {\n    authUser,\n    setAuthUser\n  } = useContext(AuthUserCtx);\n  const formik = useFormik({\n    initialValues: {\n      displayName: authUser.displayName,\n      address: authUser.address\n    },\n    onSubmit: values => {\n      const jwt = localStorage.getItem(\"jwt\");\n      axios.put(\"http://localhost:5000/auth/me\", values, {\n        headers: {\n          Authorization: \"Bearer \" + jwt\n        }\n      }).then(res => {\n        setAuthUser(res.data);\n      });\n    }\n  });\n  const {\n    handleSubmit,\n    handleChange,\n    values\n  } = formik;\n\n  const uploadPhoto = file => {\n    const formData = new FormData();\n    formData.append(\"photo\", file);\n    axios.post(\"http://localhost:5000/upload\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    }).then(res => {\n      const newPhotoURL = `http://localhost:5000/static/${res.data.fileName}`;\n      axios.put(\"http://localhost:5000/auth/me\", {\n        photoURL: newPhotoURL\n      }, {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        }\n      }).then(res => {\n        setAuthUser(res.data);\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, \"Configurations for \", authUser.username), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center my-3 flex-column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: authUser.photoURL || defaultImg,\n    alt: \"avatar\",\n    style: {\n      width: 150\n    },\n    className: \"border rounded-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Form.File, {\n    custom: true,\n    label: \"Select ...\",\n    style: {\n      maxWidth: 350\n    },\n    className: \"mt-2\",\n    onChange: e => {\n      uploadPhoto(e.target.files[0]);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formDisplayName\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  }, \"Display Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter Display Name\",\n    name: \"displayName\",\n    value: values.displayName,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Form.Group, {\n    controlId: \"formAddress\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, \"Address\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Enter Address\",\n    name: \"address\",\n    value: values.address,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    variant: \"primary\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, \"Update\")));\n};","map":{"version":3,"sources":["C:/Users/Asus/FullStack_CL32/project/frontend/src/screens/me/Me.js"],"names":["React","useContext","Container","Form","Button","useFormik","axios","AuthUserCtx","defaultImg","Me","authUser","setAuthUser","formik","initialValues","displayName","address","onSubmit","values","jwt","localStorage","getItem","put","headers","Authorization","then","res","data","handleSubmit","handleChange","uploadPhoto","file","formData","FormData","append","post","newPhotoURL","fileName","photoURL","username","width","maxWidth","e","target","files"],"mappings":"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","sourcesContent":["import React, { useContext } from \"react\";\nimport { Container, Form, Button } from \"react-bootstrap\";\nimport { useFormik } from \"formik\";\nimport axios from \"axios\";\n\nimport { AuthUserCtx } from \"../../context/authUser\";\n\nconst defaultImg =\n  \"https://icon-library.com/images/default-user-icon/default-user-icon-4.jpg\";\n\nexport const Me = () => {\n  const { authUser, setAuthUser } = useContext(AuthUserCtx);\n\n  const formik = useFormik({\n    initialValues: {\n      displayName: authUser.displayName,\n      address: authUser.address,\n    },\n    onSubmit: (values) => {\n      const jwt = localStorage.getItem(\"jwt\");\n      axios\n        .put(\"http://localhost:5000/auth/me\", values, {\n          headers: {\n            Authorization: \"Bearer \" + jwt,\n          },\n        })\n        .then((res) => {\n          setAuthUser(res.data);\n        });\n    },\n  });\n\n  const { handleSubmit, handleChange, values } = formik;\n\n  const uploadPhoto = (file) => {\n    const formData = new FormData();\n    formData.append(\"photo\", file);\n    axios\n      .post(\"http://localhost:5000/upload\", formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      })\n      .then((res) => {\n        const newPhotoURL = `http://localhost:5000/static/${res.data.fileName}`;\n        axios\n          .put(\n            \"http://localhost:5000/auth/me\",\n            {\n              photoURL: newPhotoURL,\n            },\n            {\n              headers: {\n                Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n              },\n            }\n          )\n          .then((res) => {\n            setAuthUser(res.data);\n          });\n      });\n  };\n\n  return (\n    <Container className=\"mt-5\">\n      <h1>Configurations for {authUser.username}</h1>\n      <div className=\"d-flex align-items-center my-3 flex-column\">\n        <img\n          src={authUser.photoURL || defaultImg}\n          alt=\"avatar\"\n          style={{ width: 150 }}\n          className=\"border rounded-circle\"\n        />\n        <Form.File\n          custom\n          label=\"Select ...\"\n          style={{ maxWidth: 350 }}\n          className=\"mt-2\"\n          onChange={(e) => {\n            uploadPhoto(e.target.files[0]);\n          }}\n        />\n      </div>\n      <Form onSubmit={handleSubmit}>\n        <Form.Group controlId=\"formDisplayName\">\n          <Form.Label>Display Name</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Enter Display Name\"\n            name=\"displayName\"\n            value={values.displayName}\n            onChange={handleChange}\n          />\n        </Form.Group>\n        <Form.Group controlId=\"formAddress\">\n          <Form.Label>Address</Form.Label>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"Enter Address\"\n            name=\"address\"\n            value={values.address}\n            onChange={handleChange}\n          />\n        </Form.Group>\n        <Button variant=\"primary\" type=\"submit\">\n          Update\n        </Button>\n      </Form>\n    </Container>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}